webpackJsonp([1],{"+/VF":function(t,e){},"/Vjt":function(t,e){},"1VC/":function(t,e){},"3ESU":function(t,e){},"4JDG":function(t,e){},"4Zvk":function(t,e){},"79gy":function(t,e){},"8Hml":function(t,e){},"9JTK":function(t,e){},"9keN":function(t,e){},H3iu:function(t,e){},JbHs:function(t,e){},NHnr:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=a("//Fk"),i=a.n(r),s=a("7+uW"),n={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[this.isMask?e("div",{staticClass:"mask"}):this._e(),this._v(" "),this.isRouterAlive?e("router-view"):this._e()],1)},staticRenderFns:[]};var o=a("VU/8")({name:"App",components:{},provide:function(){return{reload:this.reload,mask:this.mask}},data:function(){return{isRouterAlive:!0,isMask:!1}},methods:{reload:function(){this.isRouterAlive=!1,this.$nextTick(function(){this.isRouterAlive=!0})},mask:function(){this.isMask=!this.isMask}}},n,!1,function(t){a("TAcF")},null,null).exports,d=a("/ocq"),_={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"appheader"}},[a("div",{staticClass:"header-wrapper"},[a("div",{staticClass:"logout",on:{click:t.logout}},[a("span",[t._v("退出")])]),t._v(" "),a("h1",[t._v("定配通——后台管理系统")]),t._v(" "),a("div",{staticClass:"nav"},[t.isAdmin?a("ul",[a("li",[a("router-link",{attrs:{to:{name:"adminLink"},exact:""}},[t._v("管理员")])],1),t._v(" "),a("li",[a("router-link",{attrs:{to:{name:"factoryLink"},exact:""}},[t._v("加工房")])],1)]):t._e(),t._v(" "),a("div",{staticClass:"search"},[a("form",{on:{submit:function(e){return e.preventDefault(),t.search(e)}}},[a("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.searchTxt,expression:"searchTxt",modifiers:{trim:!0}}],attrs:{type:"text",value:"搜索",placeholder:"搜索姓名/账号/订单编号"},domProps:{value:t.searchTxt},on:{input:function(e){e.target.composing||(t.searchTxt=e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}}),t._v(" "),a("button",{staticClass:"searchBtn",attrs:{type:"submit",value:""}})])])])])])},staticRenderFns:[]};var u={name:"Home",components:{appHeader:a("VU/8")({name:"appheader",data:function(){return{isAdmin:!1}},created:function(){this.isAdmin=this.$store.getters.isAdmin},methods:{search:function(){this.$store.commit("setSearchTxt",this.searchTxt)},logout:function(){this.$store.commit("userStatus",""),this.$router.push({name:"loginLink"})},clearSearch:function(){this.$store.commit("setSearchTxt","")}},computed:{searchTxt:{get:function(){return this.$store.getters.searchTxt},set:function(t){this.$store.commit("setSearchTxt",t)}}},watch:{$route:"clearSearch"}},_,!1,function(t){a("ZgDZ")},"data-v-7411a7ab",null).exports}},l={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"home"}},[e("app-header"),this._v(" "),e("router-view")],1)},staticRenderFns:[]};var m=a("VU/8")(u,l,!1,function(t){a("79gy")},"data-v-6cde33dd",null).exports,c=a("mvHQ"),v=a.n(c),p={data:function(){return{id:"",password:"",isError:!1,remindMessage:""}},beforeRouteEnter:function(t,e,a){a(function(t){return t.$store.dispatch("setUser","")})},methods:{login:function(){var t=this,e=/^[A-Za-z0-9]*$/;if(this.id&&this.password)if(e.test(this.id)&&e.test(this.password)){this.isError=!1,this.remindMessage="";var a={user_phone:this.id,user_login_pw:this.password};this.$axios.post("Login/get_token",v()(a)).then(function(e){0==e.data.status?(t.isError=!0,t.remindMessage="账号或密码错误",t.password=""):1==e.data.status&&(t.$store.commit("userStatus",e.data),"admin"==e.data.identity?t.$router.push({name:"homeLink"}):"manager"==e.data.identity?t.$router.push({name:"managerLink"}):(t.isError=!0,t.remindMessage="账号或密码错误",t.password=""))})}else this.isError=!0,this.remindMessage="非法账号或密码";else this.isError=!0,this.remindMessage="账号或密码不能为空"}}},f={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"bg"},[a("div",{staticClass:"login"},[a("span",{staticClass:"header"},[t._v("用户登录")]),t._v(" "),a("form",{attrs:{action:""},on:{submit:function(e){return e.preventDefault(),t.login(e)}}},[a("div",{staticClass:"input"},[a("label",{attrs:{for:"id"}},[t._v("账号")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.id,expression:"id",modifiers:{trim:!0}}],attrs:{type:"text",placeholder:"账号"},domProps:{value:t.id},on:{input:function(e){e.target.composing||(t.id=e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}})]),t._v(" "),a("div",{staticClass:"input last"},[a("label",{attrs:{for:"password"}},[t._v("密码")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.password,expression:"password",modifiers:{trim:!0}}],attrs:{type:"password",placeholder:"密码"},domProps:{value:t.password},on:{input:function(e){e.target.composing||(t.password=e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}})]),t._v(" "),a("div",{staticClass:"error"},[a("span",{directives:[{name:"show",rawName:"v-show",value:t.isError,expression:"isError"}]},[t._v(t._s(t.remindMessage))])]),t._v(" "),a("button",{staticClass:"loginBtn"},[t._v("登录")])])])])},staticRenderFns:[]};var h=a("VU/8")(p,f,!1,function(t){a("/Vjt")},"data-v-d61d2c92",null).exports,g={inject:["reload","mask"],name:"edit",data:function(){return{src:"",editData:{}}},methods:{update:function(){var t=this,e=document.getElementById("file").files[0],a=this.$store.getters.token,r=this.editData.user_name,i=this.editData.user_phone,s=this.editData.user_id_card_num,n=this.editData.user_login_pw,o=this.editData.user_id,d=new FormData;if(e){if(-1==e.type.indexOf("image/"))return void alert("请上传图片");d.append("file",e)}if(i&&""!==i&&/^\d{11}$/.test(i))if(s&&""!==s&&/^[1-9]\d{7}((0\d)|(1[0-2]))(([0|1|2]\d)|3[0-1])\d{3}$|^[1-9]\d{5}[1-9]\d{3}((0\d)|(1[0-2]))(([0|1|2]\d)|3[0-1])\d{3}([0-9]|X)$/.test(s))if(n&&""!==n&&/^(?![0-9]+$)(?![a-zA-Z]+$)[0-9A-Za-z]{6,32}$/.test(n))if(r&&""!==r&&/^[\u4E00-\u9FA5A-Za-z]+$/.test(r)){d.append("token",a),d.append("user_name",r),d.append("user_phone",i),d.append("user_id_card_num",s),d.append("user_login_pw",n),d.append("user_id",o);this.$axios.post("Admin/update_manager_info",d,{headers:{"Content-Type":"multipart/form-data"}}).then(function(e){1==e.data.status?(document.getElementById("edit").style.display="none",alert("修改成功"),t.reload(),t.mask()):1e4==e.data.errorCode?alert("修改值非法"):"user phone exist"==e.data.msg?alert("账号已存在"):alert("服务器错误")})}else alert("姓名只能输入中文和英文");else alert("密码必须为英文和数字，最低6位");else alert("请输入正确的身份证号码");else alert("请输入正确的手机号码")},getEditData:function(t){this.originalData=t,this.editData.user_id=t.user_id,this.editData.user_name=t.user_name,this.editData.user_phone=t.user_phone,this.editData.user_id_card_num=t.user_id_card_num,this.editData.user_login_pw=t.user_login_pw,this.src=t.user_id_card_photo},getFile:function(t){var e=this,a=t.target.files[0];if(t&&window.FileReader){var r=new FileReader;r.readAsDataURL(a),r.onloadend=function(){e.src=this.result}}},close:function(){this.mask(),document.getElementById("edit").style.display="none"}}},w={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"edit"}},[a("div",{staticClass:"header"},[a("div",{staticClass:"close",on:{click:t.close}},[t._v("X")]),t._v(" "),a("h3",[t._v("修改管理员")])]),t._v(" "),a("form",{on:{submit:function(e){return e.preventDefault(),t.update(e)}}},[a("div",{staticClass:"form"},[a("div",{staticClass:"form-group"},[a("label",[t._v("姓名：")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.editData.user_name,expression:"editData.user_name",modifiers:{trim:!0}}],attrs:{type:"text",placeholder:"中文或英文"},domProps:{value:t.editData.user_name},on:{input:function(e){e.target.composing||t.$set(t.editData,"user_name",e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}})]),t._v(" "),a("div",{staticClass:"form-group"},[a("label",[t._v("账号/手机号：")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.editData.user_phone,expression:"editData.user_phone",modifiers:{trim:!0}}],attrs:{type:"text",placeholder:"手机号"},domProps:{value:t.editData.user_phone},on:{input:function(e){e.target.composing||t.$set(t.editData,"user_phone",e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}})]),t._v(" "),a("div",{staticClass:"form-group"},[a("label",[t._v("身份证号码：")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.editData.user_id_card_num,expression:"editData.user_id_card_num",modifiers:{trim:!0}}],attrs:{type:"text",placeholder:"身份证号码"},domProps:{value:t.editData.user_id_card_num},on:{input:function(e){e.target.composing||t.$set(t.editData,"user_id_card_num",e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}})]),t._v(" "),a("div",{staticClass:"form-group"},[a("label",[t._v("密码：")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.editData.user_login_pw,expression:"editData.user_login_pw",modifiers:{trim:!0}}],attrs:{type:"text",placeholder:"英文加数字，最低6位"},domProps:{value:t.editData.user_login_pw},on:{input:function(e){e.target.composing||t.$set(t.editData,"user_login_pw",e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}})]),t._v(" "),a("div",{staticClass:"form-img"},[a("label",{attrs:{for:"file"}},[t._v("更改图片")]),t._v(" "),a("div",{attrs:{id:"img-container"}},[a("img",{attrs:{src:t.src,alt:""}})]),t._v(" "),a("input",{attrs:{type:"file",id:"file"},on:{change:t.getFile}})]),t._v(" "),t._m(0),t._v(" "),a("button",{staticClass:"btn",attrs:{type:"submit"}},[t._v("确认修改")])])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"identity"},[e("span",[this._v("账号身份：管理员")])])}]};var D={inject:["reload","mask"],name:"add",data:function(){return{src:"",addData:{}}},methods:{update:function(){var t=this,e=document.getElementById("add-file").files[0],a=this.$store.getters.token,r=this.addData.user_name,i=this.addData.user_phone,s=this.addData.user_id_card_num,n=this.addData.user_login_pw,o=new FormData;if(e){if(-1==e.type.indexOf("image/"))return void alert("请上传图片");o.append("file",e)}if(i&&""!==i&&/^\d{11}$/.test(i))if(s&&""!==s&&/^[1-9]\d{7}((0\d)|(1[0-2]))(([0|1|2]\d)|3[0-1])\d{3}$|^[1-9]\d{5}[1-9]\d{3}((0\d)|(1[0-2]))(([0|1|2]\d)|3[0-1])\d{3}([0-9]|X)$/.test(s))if(n&&""!==n&&/^(?![0-9]+$)(?![a-zA-Z]+$)[0-9A-Za-z]{6,32}$/.test(n))if(r&&""!==r&&/^[\u4E00-\u9FA5A-Za-z]+$/.test(r))if(e){o.append("token",a),o.append("user_name",r),o.append("user_phone",i),o.append("user_id_card_num",s),o.append("user_login_pw",n);this.$axios.post("Admin/new_manager",o,{headers:{"Content-Type":"multipart/form-data"}}).then(function(e){1==e.data.status?(document.getElementById("add").style.display="none",alert("添加成功"),t.reload(),t.mask()):"params error"==e.data.msg?alert("添加值为空或非法"):"photo err"==e.data.msg?alert("图片错误"):"user phone exist"==e.data.msg?alert("账号已存在"):alert("服务器错误")})}else alert("请上传图片");else alert("姓名只能输入中文和英文");else alert("密码必须为英文和数字，最低6位");else alert("请输入正确的身份证号码");else alert("请输入正确的手机号码")},getFile:function(t){var e=this,a=t.target.files[0];if(t&&window.FileReader){var r=new FileReader;r.readAsDataURL(a),r.onloadend=function(){e.src=this.result}}},close:function(){this.mask(),this.addData={},document.getElementById("add-file").value=null,this.src="",document.getElementById("add").style.display="none"}}},$={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"add"}},[a("div",{staticClass:"header"},[a("div",{staticClass:"close",on:{click:t.close}},[t._v("X")]),t._v(" "),a("h3",[t._v("添加管理员")])]),t._v(" "),a("form",{on:{submit:function(e){return e.preventDefault(),t.update(e)}}},[a("div",{staticClass:"form"},[a("div",{staticClass:"form-group"},[a("label",[t._v("姓名：")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.addData.user_name,expression:"addData.user_name",modifiers:{trim:!0}}],attrs:{type:"text",placeholder:"中文或英文"},domProps:{value:t.addData.user_name},on:{input:function(e){e.target.composing||t.$set(t.addData,"user_name",e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}})]),t._v(" "),a("div",{staticClass:"form-group"},[a("label",[t._v("账号/手机号：")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.addData.user_phone,expression:"addData.user_phone",modifiers:{trim:!0}}],attrs:{type:"text",placeholder:"手机号"},domProps:{value:t.addData.user_phone},on:{input:function(e){e.target.composing||t.$set(t.addData,"user_phone",e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}})]),t._v(" "),a("div",{staticClass:"form-group"},[a("label",[t._v("身份证号码：")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.addData.user_id_card_num,expression:"addData.user_id_card_num",modifiers:{trim:!0}}],attrs:{type:"text",placeholder:"身份证号码"},domProps:{value:t.addData.user_id_card_num},on:{input:function(e){e.target.composing||t.$set(t.addData,"user_id_card_num",e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}})]),t._v(" "),a("div",{staticClass:"form-group"},[a("label",[t._v("密码：")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.addData.user_login_pw,expression:"addData.user_login_pw",modifiers:{trim:!0}}],attrs:{type:"text",placeholder:"英文加数字，最低6位"},domProps:{value:t.addData.user_login_pw},on:{input:function(e){e.target.composing||t.$set(t.addData,"user_login_pw",e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}})]),t._v(" "),a("div",{staticClass:"form-img"},[a("label",{attrs:{for:"add-file"}},[t._v("上传图片")]),t._v(" "),a("div",{attrs:{id:"add-img-container"}},[a("img",{attrs:{src:t.src,alt:""}})]),t._v(" "),a("input",{attrs:{type:"file",id:"add-file",name:"photo"},on:{change:t.getFile}})]),t._v(" "),t._m(0),t._v(" "),a("button",{staticClass:"btn",attrs:{type:"submit"}},[t._v("确认添加")])])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"identity"},[e("span",[this._v("账号身份：管理员")])])}]};var y={inject:["mask"],name:"admin",components:{edit:a("VU/8")(g,w,!1,function(t){a("eYZy")},null,null).exports,add:a("VU/8")(D,$,!1,function(t){a("JbHs")},null,null).exports},data:function(){return{managerList:[],searchTxt:""}},beforeRouteEnter:function(t,e,a){window.sessionStorage.getItem("isLogin")&&window.sessionStorage.getItem("isAdmin")?a():(alert("你需要登陆"),a("/"))},created:function(){var t=this,e={token:this.$store.getters.token};this.$axios.post("Admin/get_manager_list",v()(e)).then(function(e){t.managerList=JSON.parse(e.data)})},methods:{edit:function(t){this.mask(),document.getElementById("edit").style.display="block",this.$refs.edit.getEditData(t)},add:function(){this.mask(),document.getElementById("add").style.display="block"}},computed:{filterManagers:function(){var t=this;return this.managerList.filter(function(e){return e.user_name.match(t.$store.getters.searchTxt)||e.user_phone.match(t.$store.getters.searchTxt)})}}},x={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"admin"}},[a("table",{staticClass:"table"},[t._m(0),t._v(" "),t._l(t.filterManagers,function(e){return a("tr",[a("td",[a("img",{attrs:{src:e.user_id_card_photo,alt:""}})]),t._v(" "),a("td",[t._v(t._s(e.user_name))]),t._v(" "),a("td",[t._v(t._s(e.user_phone))]),t._v(" "),a("td",[t._v(t._s(e.user_id_card_num))]),t._v(" "),a("td",[t._v(t._s(e.user_login_pw))]),t._v(" "),a("td",[t._v(t._s(e.invite))]),t._v(" "),a("td",[a("span",{staticClass:"edit",on:{click:function(a){return t.edit(e)}}},[t._v("修改")])])])})],2),t._v(" "),a("edit",{ref:"edit",staticClass:"edit-wrapper"}),t._v(" "),a("div",{staticClass:"add",on:{click:t.add}},[a("span",{staticClass:"addBtn"},[t._v("+")]),t._v(" "),a("span",[t._v("添加用户")])]),t._v(" "),a("add",{staticClass:"edit-wrapper"})],1)},staticRenderFns:[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("tr",[a("th",[t._v("身份证图片")]),t._v(" "),a("th",[t._v("姓名")]),t._v(" "),a("th",[t._v("账号/手机号")]),t._v(" "),a("th",[t._v("身份证")]),t._v(" "),a("th",[t._v("密码")]),t._v(" "),a("th",[t._v("审核人数")]),t._v(" "),a("th",[t._v("操作")])])}]};var k=a("VU/8")(y,x,!1,function(t){a("9JTK")},"data-v-35227b8a",null).exports,b=function(t){if(0!=t){var e=new Date(1e3*t);return e.getFullYear()+"/"+(e.getMonth()+1)+"/"+e.getDate()}return"暂无"},C=function(t){if(0!=t){var e=new Date(1e3*t);return e.getFullYear()+"/"+(e.getMonth()+1)+"/"+e.getDate()+" "+e.getHours()+":"+e.getMinutes()+":"+e.getSeconds()}return"暂无"},E={inject:["reload","mask"],name:"edit",data:function(){return{src:"",editData:{},isEdit:!1}},methods:{update:function(){var t=this,e=document.getElementById("file").files[0],a=this.$store.getters.token,r=this.editData.user_name,i=this.editData.user_phone,s=this.editData.user_id_card_num,n=this.editData.user_login_pw,o=this.editData.user_login_pw,d=this.editData.user_login_pw,_=this.editData.user_login_pw,u=this.editData.user_manager_pw,l=this.editData.user_id,m=new Date(this.editData.expire_time).getTime()/1e3,c=new FormData;if(e){if(-1==e.type.indexOf("image/"))return void alert("请上传图片");c.append("file",e)}var v=/^\w{3,8}$/;if(i&&""!==i&&/^\d{11}$/.test(i))if(s&&""!==s&&/^[1-9]\d{7}((0\d)|(1[0-2]))(([0|1|2]\d)|3[0-1])\d{3}$|^[1-9]\d{5}[1-9]\d{3}((0\d)|(1[0-2]))(([0|1|2]\d)|3[0-1])\d{3}([0-9]|X)$/.test(s))if(n&&""!==n&&/^(?![0-9]+$)(?![a-zA-Z]+$)[0-9A-Za-z]{6,32}$/.test(n))if(o&&""!==o&&v.test(o))if(d&&""!==d&&v.test(d))if(_&&""!==_&&v.test(_))if(u&&""!==u&&v.test(u))if(r&&""!==r&&/^[\u4E00-\u9FA5A-Za-z]+$/.test(r))if(m&&""!==m){c.append("token",a),c.append("user_name",r),c.append("user_phone",i),c.append("user_id_card_num",s),c.append("user_login_pw",n),c.append("user_master_pw",o),c.append("user_finance_pw",d),c.append("user_saving_pw",_),c.append("user_manager_pw",u),c.append("user_id",l),c.append("expire_time",m);this.$axios.post("Admin/update_worker_info",c,{headers:{"Content-Type":"multipart/form-data"}}).then(function(e){1==e.data.status?(document.getElementById("edit").style.display="none",alert("修改成功"),t.reload(),t.mask()):1e4==e.data.errorCode?alert("修改值非法"):"user phone exist"==e.data.msg?alert("账号已存在"):alert("服务器错误")})}else alert("请输入正确的日期");else alert("姓名只能输入中文和英文");else alert("库存密码为英文或数字，3~8位");else alert("库存密码为英文或数字，3~8位");else alert("财务密码为英文或数字，3~8位");else alert("店长密码为英文或数字，3~8位");else alert("登录密码必须为英文和数字，最低6位");else alert("请输入正确的身份证号码");else alert("请输入正确的手机号码")},getEditData:function(t){this.isEdit=!1,this.editData.user_id=t.user_id,this.editData.user_name=t.user_name,this.editData.user_phone=t.user_phone,this.editData.user_id_card_num=t.user_id_card_num,this.editData.user_login_pw=t.user_login_pw,this.editData.user_master_pw=t.user_master_pw,this.editData.user_finance_pw=t.user_finance_pw,this.editData.user_saving_pw=t.user_saving_pw,this.editData.user_manager_pw=t.user_manager_pw,this.src=t.user_id_card_photo,this.editData.expire_time=t.expire_time},getFile:function(t){var e=this,a=t.target.files[0];if(t&&window.FileReader){var r=new FileReader;r.readAsDataURL(a),r.onloadend=function(){e.src=this.result}}},close:function(){this.isEdit=!1,this.mask(),document.getElementById("edit").style.display="none"}}},F={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"edit"}},[a("div",{staticClass:"header"},[a("div",{staticClass:"close",on:{click:t.close}},[t._v("X")]),t._v(" "),a("h3",[t._v("修改加工房")])]),t._v(" "),a("form",{on:{submit:function(e){return e.preventDefault(),t.update(e)}}},[a("div",{staticClass:"form"},[a("div",{staticClass:"form-group"},[a("label",[t._v("姓名：")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.editData.user_name,expression:"editData.user_name",modifiers:{trim:!0}}],attrs:{type:"text",placeholder:"中文或英文"},domProps:{value:t.editData.user_name},on:{input:function(e){e.target.composing||t.$set(t.editData,"user_name",e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}})]),t._v(" "),a("div",{staticClass:"form-group"},[a("label",[t._v("账号/手机号：")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.editData.user_phone,expression:"editData.user_phone",modifiers:{trim:!0}}],attrs:{type:"text",placeholder:"手机号"},domProps:{value:t.editData.user_phone},on:{input:function(e){e.target.composing||t.$set(t.editData,"user_phone",e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}})]),t._v(" "),a("div",{staticClass:"form-group"},[a("label",[t._v("身份证号码：")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.editData.user_id_card_num,expression:"editData.user_id_card_num",modifiers:{trim:!0}}],attrs:{type:"text",placeholder:"身份证号码"},domProps:{value:t.editData.user_id_card_num},on:{input:function(e){e.target.composing||t.$set(t.editData,"user_id_card_num",e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}})]),t._v(" "),a("div",{staticClass:"form-group"},[a("label",[t._v("登录密码：")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.editData.user_login_pw,expression:"editData.user_login_pw",modifiers:{trim:!0}}],attrs:{type:"text",placeholder:"数字加英文，最低6位"},domProps:{value:t.editData.user_login_pw},on:{input:function(e){e.target.composing||t.$set(t.editData,"user_login_pw",e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}})]),t._v(" "),a("div",{staticClass:"form-group"},[a("label",[t._v("店长密码：")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.editData.user_master_pw,expression:"editData.user_master_pw",modifiers:{trim:!0}}],attrs:{type:"text",placeholder:"英文或数字，3~8位"},domProps:{value:t.editData.user_master_pw},on:{input:function(e){e.target.composing||t.$set(t.editData,"user_master_pw",e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}})]),t._v(" "),a("div",{staticClass:"form-group"},[a("label",[t._v("财务密码：")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.editData.user_finance_pw,expression:"editData.user_finance_pw",modifiers:{trim:!0}}],attrs:{type:"text",placeholder:"英文或数字，3~8位"},domProps:{value:t.editData.user_finance_pw},on:{input:function(e){e.target.composing||t.$set(t.editData,"user_finance_pw",e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}})]),t._v(" "),a("div",{staticClass:"form-group"},[a("label",[t._v("库存密码：")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.editData.user_saving_pw,expression:"editData.user_saving_pw",modifiers:{trim:!0}}],attrs:{type:"text",placeholder:"英文或数字，3~8位"},domProps:{value:t.editData.user_saving_pw},on:{input:function(e){e.target.composing||t.$set(t.editData,"user_saving_pw",e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}})]),t._v(" "),a("div",{staticClass:"form-group"},[a("label",[t._v("经理密码：")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.editData.user_manager_pw,expression:"editData.user_manager_pw",modifiers:{trim:!0}}],attrs:{type:"text",placeholder:"英文或数字，3~8位"},domProps:{value:t.editData.user_manager_pw},on:{input:function(e){e.target.composing||t.$set(t.editData,"user_manager_pw",e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}})]),t._v(" "),a("div",{staticClass:"form-group"},[a("label",[t._v("到期时间：")]),t._v(" "),t.isEdit?a("input",{directives:[{name:"model",rawName:"v-model",value:t.editData.expire_time,expression:"editData.expire_time"}],attrs:{type:"date"},domProps:{value:t.editData.expire_time},on:{input:function(e){e.target.composing||t.$set(t.editData,"expire_time",e.target.value)}}}):a("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.editData.expire_time,expression:"editData.expire_time",modifiers:{trim:!0}}],attrs:{type:"text"},domProps:{value:t.editData.expire_time},on:{click:function(e){t.isEdit=!0},input:function(e){e.target.composing||t.$set(t.editData,"expire_time",e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}})]),t._v(" "),a("div",{staticClass:"form-img"},[a("label",{attrs:{for:"file"}},[t._v("更改图片")]),t._v(" "),a("div",{attrs:{id:"img-container"}},[a("img",{attrs:{src:t.src,alt:""}})]),t._v(" "),a("input",{attrs:{type:"file",id:"file"},on:{change:t.getFile}})]),t._v(" "),t._m(0),t._v(" "),a("button",{staticClass:"btn",attrs:{type:"submit"}},[t._v("确认修改")])])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"identity"},[e("span",[this._v("账号身份：加工房")])])}]};var U={inject:["reload","mask"],name:"add",data:function(){return{src:"",addData:{}}},methods:{update:function(){var t=this,e=document.getElementById("add-file").files[0],a=this.$store.getters.token,r=this.addData.user_name,i=this.addData.user_phone,s=this.addData.user_id_card_num,n=this.addData.user_login_pw,o=this.addData.user_master_pw,d=this.addData.user_finance_pw,_=this.addData.user_saving_pw,u=this.addData.user_manager_pw,l=new Date(this.addData.expire_time).getTime()/1e3,m=new FormData;if(e){if(-1==e.type.indexOf("image/"))return void alert("请上传图片");m.append("file",e)}var c=/^\w{3,8}$/;if(i&&""!==i&&/^\d{11}$/.test(i))if(s&&""!==s&&/^[1-9]\d{7}((0\d)|(1[0-2]))(([0|1|2]\d)|3[0-1])\d{3}$|^[1-9]\d{5}[1-9]\d{3}((0\d)|(1[0-2]))(([0|1|2]\d)|3[0-1])\d{3}([0-9]|X)$/.test(s))if(n&&""!==n&&/^(?![0-9]+$)(?![a-zA-Z]+$)[0-9A-Za-z]{6,32}$/.test(n))if(o&&""!==o&&c.test(o))if(d&&""!==d&&c.test(d))if(_&&""!==_&&c.test(_))if(u&&""!==u&&c.test(u))if(r&&""!==r&&/^[\u4E00-\u9FA5A-Za-z]+$/.test(r))if(l&&""!==l)if(e){m.append("user_id_card_photo",e),m.append("token",a),m.append("user_name",r),m.append("user_phone",i),m.append("user_id_card_num",s),m.append("user_login_pw",n),m.append("user_master_pw",o),m.append("user_finance_pw",d),m.append("user_saving_pw",_),m.append("user_manager_pw",u),m.append("expire_time",l);this.$axios.post("Admin/new_worker",m,{headers:{"Content-Type":"multipart/form-data"}}).then(function(e){1==e.data.status?(document.getElementById("add").style.display="none",alert("添加成功"),t.reload(),t.mask()):"params error"==e.data.msg?alert("添加值为空或非法"):"photo err"==e.data.msg?alert("图片错误"):"user phone exist"==e.data.msg?alert("账号已存在"):alert("服务器错误")})}else alert("请上传图片");else alert("请输入正确的日期");else alert("姓名只能输入中文和英文");else alert("库存密码为英文或数字，3~8位");else alert("库存密码为英文或数字，3~8位");else alert("财务密码为英文或数字，3~8位");else alert("店长密码为英文或数字，3~8位");else alert("登录密码必须为英文和数字，最低6位");else alert("请输入正确的身份证号码");else alert("请输入正确的手机号码")},getFile:function(t){var e=this,a=t.target.files[0];if(t&&window.FileReader){var r=new FileReader;r.readAsDataURL(a),r.onloadend=function(){e.src=this.result}}},close:function(){this.mask(),this.addData={},document.getElementById("add-file").value=null,this.src="",document.getElementById("add").style.display="none"}}},L={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"add"}},[a("div",{staticClass:"header"},[a("div",{staticClass:"close",on:{click:t.close}},[t._v("X")]),t._v(" "),a("h3",[t._v("添加加工房")])]),t._v(" "),a("form",{on:{submit:function(e){return e.preventDefault(),t.update(e)}}},[a("div",{staticClass:"form"},[a("div",{staticClass:"form-group"},[a("label",[t._v("姓名：")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.addData.user_name,expression:"addData.user_name",modifiers:{trim:!0}}],attrs:{type:"text",placeholder:"中文或英文"},domProps:{value:t.addData.user_name},on:{input:function(e){e.target.composing||t.$set(t.addData,"user_name",e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}})]),t._v(" "),a("div",{staticClass:"form-group"},[a("label",[t._v("账号/手机号：")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.addData.user_phone,expression:"addData.user_phone",modifiers:{trim:!0}}],attrs:{type:"text",placeholder:"手机号"},domProps:{value:t.addData.user_phone},on:{input:function(e){e.target.composing||t.$set(t.addData,"user_phone",e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}})]),t._v(" "),a("div",{staticClass:"form-group"},[a("label",[t._v("身份证号码：")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.addData.user_id_card_num,expression:"addData.user_id_card_num",modifiers:{trim:!0}}],attrs:{type:"text",placeholder:"身份证号码"},domProps:{value:t.addData.user_id_card_num},on:{input:function(e){e.target.composing||t.$set(t.addData,"user_id_card_num",e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}})]),t._v(" "),a("div",{staticClass:"form-group"},[a("label",[t._v("登录密码：")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.addData.user_login_pw,expression:"addData.user_login_pw",modifiers:{trim:!0}}],attrs:{type:"text",placeholder:"数字加英文，最低6位"},domProps:{value:t.addData.user_login_pw},on:{input:function(e){e.target.composing||t.$set(t.addData,"user_login_pw",e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}})]),t._v(" "),a("div",{staticClass:"form-group"},[a("label",[t._v("店长密码：")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.addData.user_master_pw,expression:"addData.user_master_pw",modifiers:{trim:!0}}],attrs:{type:"text",placeholder:"英文或数字，3~8位"},domProps:{value:t.addData.user_master_pw},on:{input:function(e){e.target.composing||t.$set(t.addData,"user_master_pw",e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}})]),t._v(" "),a("div",{staticClass:"form-group"},[a("label",[t._v("财务密码：")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.addData.user_finance_pw,expression:"addData.user_finance_pw",modifiers:{trim:!0}}],attrs:{type:"text",placeholder:"英文或数字，3~8位"},domProps:{value:t.addData.user_finance_pw},on:{input:function(e){e.target.composing||t.$set(t.addData,"user_finance_pw",e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}})]),t._v(" "),a("div",{staticClass:"form-group"},[a("label",[t._v("库存密码：")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.addData.user_saving_pw,expression:"addData.user_saving_pw",modifiers:{trim:!0}}],attrs:{type:"text",placeholder:"英文或数字，3~8位"},domProps:{value:t.addData.user_saving_pw},on:{input:function(e){e.target.composing||t.$set(t.addData,"user_saving_pw",e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}})]),t._v(" "),a("div",{staticClass:"form-group"},[a("label",[t._v("经理密码：")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.addData.user_manager_pw,expression:"addData.user_manager_pw",modifiers:{trim:!0}}],attrs:{type:"text",placeholder:"英文或数字，3~8位"},domProps:{value:t.addData.user_manager_pw},on:{input:function(e){e.target.composing||t.$set(t.addData,"user_manager_pw",e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}})]),t._v(" "),a("div",{staticClass:"form-group"},[a("label",[t._v("到期时间：")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.addData.expire_time,expression:"addData.expire_time"}],attrs:{type:"date"},domProps:{value:t.addData.expire_time},on:{input:function(e){e.target.composing||t.$set(t.addData,"expire_time",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"form-img"},[a("label",{attrs:{for:"add-file"}},[t._v("上传图片 ")]),t._v(" "),a("div",{attrs:{id:"add-img-container"}},[a("img",{attrs:{src:t.src,alt:""}})]),t._v(" "),a("input",{attrs:{type:"file",id:"add-file",name:"photo"},on:{change:t.getFile}})]),t._v(" "),t._m(0),t._v(" "),a("button",{staticClass:"btn",attrs:{type:"submit"}},[t._v("确认添加")])])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"identity"},[e("span",[this._v("账号身份：加工房")])])}]};var A={inject:["mask"],name:"factory",components:{edit:a("VU/8")(E,F,!1,function(t){a("Orav")},null,null).exports,add:a("VU/8")(U,L,!1,function(t){a("4Zvk")},null,null).exports},data:function(){return{workerList:[],searchTxt:""}},beforeRouteEnter:function(t,e,a){window.sessionStorage.getItem("isLogin")&&window.sessionStorage.getItem("isAdmin")?a():(alert("你需要登陆"),a("/"))},created:function(){var t=this,e={token:this.$store.getters.token};this.$axios.post("Admin/get_worker_list",v()(e)).then(function(e){t.workerList=JSON.parse(e.data),t.workerList.forEach(function(t){console.log(t.expire_time),t.expire_time=b(t.expire_time),console.log(t.expire_time)})})},methods:{edit:function(t){this.mask(),document.getElementById("edit").style.display="block",this.$refs.edit.getEditData(t)},add:function(){this.mask(),document.getElementById("add").style.display="block"},showData:function(t){this.$store.commit("setWorker_id",t),this.$router.push({name:"singleFactoryLink",params:{worker_id:t}})}},computed:{filterworkers:function(){var t=this;return this.workerList.filter(function(e){return e.user_name.match(t.$store.getters.searchTxt)||e.user_phone.match(t.$store.getters.searchTxt)})}}},N={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"factory"}},[a("table",{staticClass:"table"},[t._m(0),t._v(" "),t._l(t.filterworkers,function(e){return[a("tr",[a("td",{attrs:{rowspan:"2"}},[a("img",{attrs:{src:e.user_id_card_photo,alt:""}})]),t._v(" "),a("td",{attrs:{rowspan:"2"}},[t._v(t._s(e.user_name))]),t._v(" "),a("td",{attrs:{rowspan:"2"}},[t._v(t._s(e.user_phone))]),t._v(" "),a("td",{attrs:{rowspan:"2"}},[t._v(t._s(e.user_id_card_num))]),t._v(" "),a("td",[t._v("登录")]),t._v(" "),a("td",[t._v("店长")]),t._v(" "),a("td",[t._v("财务")]),t._v(" "),a("td",[t._v("库存")]),t._v(" "),a("td",[t._v("经理")]),t._v(" "),a("td",{attrs:{rowspan:"2"}},[t._v(t._s(e.auditor_name))]),t._v(" "),a("td",{attrs:{rowspan:"2"}},[t._v(t._s(e.expire_time))]),t._v(" "),a("td",{attrs:{rowspan:"2"}},[a("span",{staticClass:"edit",on:{click:function(a){return t.edit(e)}}},[t._v("修改")]),t._v(" "),a("span",{staticClass:"edit",on:{click:function(a){return t.showData(e.user_id)}}},[t._v("数据")])])]),t._v(" "),a("tr",[a("td",[t._v(t._s(e.user_login_pw))]),t._v(" "),a("td",[t._v(t._s(e.user_master_pw))]),t._v(" "),a("td",[t._v(t._s(e.user_finance_pw))]),t._v(" "),a("td",[t._v(t._s(e.user_saving_pw))]),t._v(" "),a("td",[t._v(t._s(e.user_manager_pw))])])]})],2),t._v(" "),a("edit",{ref:"edit",staticClass:"edit-wrapper"}),t._v(" "),a("div",{staticClass:"add",on:{click:t.add}},[a("span",{staticClass:"addBtn"},[t._v("+")]),t._v(" "),a("span",[t._v("添加用户")])]),t._v(" "),a("add",{staticClass:"edit-wrapper"})],1)},staticRenderFns:[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("tr",[a("th",[t._v("身份证图片")]),t._v(" "),a("th",[t._v("姓名")]),t._v(" "),a("th",[t._v("账号/手机号")]),t._v(" "),a("th",[t._v("身份证")]),t._v(" "),a("th",{attrs:{colspan:"5"}},[t._v("密码")]),t._v(" "),a("th",[t._v("审核人员")]),t._v(" "),a("th",[t._v("到期时间")]),t._v(" "),a("th",[t._v("操作")])])}]};var P=a("VU/8")(A,N,!1,function(t){a("4JDG")},"data-v-5a5d7878",null).exports,T={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"navigator"}},[e("ul",{staticClass:"nav"},[e("li",[e("router-link",{attrs:{to:{name:"clientLink"}}},[this._v("客户信息")])],1),this._v(" "),e("li",[e("router-link",{attrs:{to:{name:"commodityLink"}}},[this._v("商品信息")])],1),this._v(" "),e("li",[e("router-link",{attrs:{to:{name:"orderLink"}}},[this._v("历史订单")])],1),this._v(" "),e("li",[e("router-link",{attrs:{to:{name:"financeLink"}}},[this._v("财务报表")])],1)])])},staticRenderFns:[]};var I={inject:["reload"],name:"SingleFactory",components:{navigator:a("VU/8")({name:"Navigator",components:{}},T,!1,function(t){a("H3iu")},"data-v-017e3872",null).exports},data:function(){return{worker_id:"",worker:""}},methods:{},created:function(){var t=this;this.worker_id=this.$store.getters.worker_id;var e={token:this.$store.getters.token,worker_id:this.worker_id};this.$axios.post("Pcinfo/get_worker_info",v()(e)).then(function(e){var a;t.worker=e.data,t.worker.new_time=b(t.worker.new_time),t.worker.fresh_time=C(t.worker.fresh_time),t.worker.activity_time=(a=t.worker.activity_time)>=36?(a/3600).toFixed(2)+" h":"0 h"})}},R={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"singleFactory"}},[a("table",{staticClass:"table"},[t._m(0),t._v(" "),a("tr",[a("td",{attrs:{rowspan:"2"}},[a("img",{attrs:{src:t.worker.worker_id_card_photo,alt:""}})]),t._v(" "),a("td",{attrs:{rowspan:"2"}},[t._v(t._s(t.worker.worker_name))]),t._v(" "),a("td",{attrs:{rowspan:"2"}},[t._v(t._s(t.worker.worker_phone))]),t._v(" "),a("td",{attrs:{rowspan:"2"}},[t._v(t._s(t.worker.worker_id_card_num))]),t._v(" "),a("td",[t._v("登录")]),t._v(" "),a("td",[t._v("店长")]),t._v(" "),a("td",[t._v("财务")]),t._v(" "),a("td",[t._v("库存")]),t._v(" "),a("td",[t._v("经理")]),t._v(" "),a("td",{attrs:{rowspan:"2"}},[t._v(t._s(t.worker.auditor_name))]),t._v(" "),a("td",{attrs:{rowspan:"2"}},[t._v(t._s(t.worker.new_time))]),t._v(" "),a("td",{attrs:{rowspan:"2"}},[t._v(t._s(t.worker.activity_time))]),t._v(" "),a("td",{staticClass:"linefeed",attrs:{rowspan:"2"}},[t._v(t._s(t.worker.fresh_time))])]),t._v(" "),a("tr",[a("td",[t._v(t._s(t.worker.worker_login_pw))]),t._v(" "),a("td",[t._v(t._s(t.worker.worker_master_pw))]),t._v(" "),a("td",[t._v(t._s(t.worker.worker_finance_pw))]),t._v(" "),a("td",[t._v(t._s(t.worker.worker_saving_pw))]),t._v(" "),a("td",[t._v(t._s(t.worker.worker_manager_pw))])])]),t._v(" "),a("navigator"),t._v(" "),a("router-view")],1)},staticRenderFns:[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("tr",[a("th",[t._v("身份证图片")]),t._v(" "),a("th",[t._v("姓名")]),t._v(" "),a("th",[t._v("账号/手机号")]),t._v(" "),a("th",[t._v("身份证")]),t._v(" "),a("th",{attrs:{colspan:"5"}},[t._v("密码")]),t._v(" "),a("th",[t._v("审核人员")]),t._v(" "),a("th",[t._v("审核时间")]),t._v(" "),a("th",[t._v("活跃时长")]),t._v(" "),a("th",[t._v("最近登录")])])}]};var S=a("VU/8")(I,R,!1,function(t){a("+/VF")},"data-v-606650dc",null).exports,V={name:"Client",data:function(){return{clientList:[]}},created:function(){var t=this,e={token:this.$store.getters.token,worker_id:this.$store.getters.worker_id};this.$axios.post("Pcinfo/get_client_info",v()(e)).then(function(e){t.clientList=e.data.clients_data.data,t.clientList.forEach(function(t){t.new_time=b(t.new_time),t.fresh_time=C(t.fresh_time)})})},computed:{filterClients:function(){var t=this;return this.clientList.filter(function(e){return e.client_name.match(t.$store.getters.searchTxt)||e.client_phone.match(t.$store.getters.searchTxt)})}}},B={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"client"}},[a("table",{staticClass:"table"},[t._m(0),t._v(" "),t._l(t.filterClients,function(e){return a("tr",[a("td",[a("img",{attrs:{src:e.client_id_card_photo,alt:""}})]),t._v(" "),a("td",[t._v(t._s(e.client_shop))]),t._v(" "),a("td",[t._v(t._s(e.client_name))]),t._v(" "),a("td",[t._v(t._s(e.client_phone))]),t._v(" "),a("td",[t._v(t._s(e.client_id_card_num))]),t._v(" "),a("td",[t._v(t._s(e.client_credit))]),t._v(" "),a("td",[t._v(t._s(e.turnover))]),t._v(" "),a("td",[t._v(t._s(e.new_time))]),t._v(" "),a("td",{staticClass:"linefeed"},[t._v(t._s(e.fresh_time))])])})],2)])},staticRenderFns:[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("tr",[a("th",[t._v("身份证图片")]),t._v(" "),a("th",[t._v("店名")]),t._v(" "),a("th",[t._v("姓名")]),t._v(" "),a("th",[t._v("账号/手机号")]),t._v(" "),a("th",[t._v("身份证")]),t._v(" "),a("th",[t._v("信用额度")]),t._v(" "),a("th",[t._v("总交易额")]),t._v(" "),a("th",[t._v("添加时间")]),t._v(" "),a("th",[t._v("最近下单时间")])])}]};var M=a("VU/8")(V,B,!1,function(t){a("d8FA")},"data-v-51487f3c",null).exports,Z={name:"Commodity",data:function(){return{commodity_data:{},refreshId:+new Date,commodity_id:""}},created:function(){this.$nextTick(function(){var t=this,e={token:this.$store.getters.token,worker_id:this.$store.getters.worker_id};this.commodity_id=this.$route.params.commodity_id,this.$axios.post("Pcinfo/get_commodity",v()(e)).then(function(e){console.log(e);var a=e.data.commodity_data.data,r=[];a.forEach(function(t){r.push(t.good_kind)}),Array.prototype.unique=function(){for(var t={},e=[],a=0;a<this.length;a++)t[this[a]]||(t[this[a]]="mark",e.push(this[a]));return e};r.unique().forEach(function(e){t.commodity_data[e]={},t.commodity_data[e].rowspan=0;var r=[];a.forEach(function(t){t.good_kind==e&&r.push(t.good_name)});var i=0,s=0;r.unique().forEach(function(r){t.commodity_data[e][r]=[],a.forEach(function(a){a.good_name==r&&a.good_kind==e&&t.commodity_data[e][r].push({type:a.type,good_price:a.good_price,good_inventory:a.good_inventory,commodity_id:a.commodity_id,add_price:a.add_price})}),i+=t.commodity_data[e][r].length,s+=1,t.commodity_data[e].rowspan=i+s})}),t.refreshId=+new Date})})},methods:{showForm:function(t){this.$router.push({name:"commodityFormLink",params:{commodity_id:t}})},active:function(){this.commodity_id=this.$route.params.commodity_id}},watch:{$route:"active"}},z={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"commodity"}},[a("table",{key:t.refreshId,staticClass:"table"},[t._m(0),t._v(" "),t._l(t.commodity_data,function(e,r){return[a("tr",[a("td",{attrs:{rowspan:e.rowspan+1}},[t._v(t._s(r))])]),t._v(" "),t._l(e,function(e,r){return"rowspan"!=r?[a("tr",[a("td",{attrs:{rowspan:e.length+1}},[t._v(t._s(r))])]),t._v(" "),t._l(e,function(e){return[a("tr",{staticClass:"type",class:e.commodity_id==t.commodity_id?"active":"",on:{click:function(a){return t.showForm(e.commodity_id)}}},[a("td",[t._v(t._s(e.type))]),t._v(" "),a("td",[t._v(t._s(e.good_price))]),t._v(" "),a("td",[t._v(t._s(e.add_price))]),t._v(" "),a("td",[t._v(t._s(e.good_inventory))])])]})]:t._e()})]})],2),t._v(" "),a("router-view")],1)},staticRenderFns:[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("tr",[a("th",[t._v("种类")]),t._v(" "),a("th",[t._v("名称")]),t._v(" "),a("th",[t._v("型号")]),t._v(" "),a("th",[t._v("价格")]),t._v(" "),a("th",[t._v("附加费")]),t._v(" "),a("th",[t._v("库存量")])])}]};var O=a("VU/8")(Z,z,!1,function(t){a("9keN")},"data-v-3ece5872",null).exports,j={name:"Finance",components:{},data:function(){return{yearList:[],year_id:"",months:[1,2,3,4,5,6,7,8,9,10,11,12]}},created:function(){for(var t=(new Date).getFullYear();t>=2019;t--)this.yearList.push(t);this.year_id=this.yearList[0],this.$router.push({name:"yearLink",params:{year_id:this.year_id}})},methods:{changeYear:function(){this.year_id=this.$route.params.year_id}},watch:{$route:"changeYear"}},X={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"finance"}},[a("ul",[a("li",[t._v("年份")]),t._v(" "),t._l(t.yearList,function(e){return a("li",[a("router-link",{attrs:{to:{name:"yearLink",params:{year_id:e}}}},[t._v(t._s(e))])],1)})],2),t._v(" "),a("ul",[a("li",[t._v("月份")]),t._v(" "),t._l(t.months,function(e){return a("li",[a("router-link",{attrs:{to:{name:"monthLink",params:{month_id:e,year_id:t.year_id}},exact:""}},[t._v(t._s(e)+"月")])],1)})],2),t._v(" "),a("router-view")],1)},staticRenderFns:[]};var H=a("VU/8")(j,X,!1,function(t){a("1VC/")},"data-v-4ef3fbd3",null).exports,Y={name:"Order",components:{},data:function(){return{orders:[],trade_id:""}},created:function(){var t=this,e={token:this.$store.getters.token,worker_id:this.$store.getters.worker_id};this.trade_id=this.$route.params.trade_id,this.$axios.post("Pcinfo/get_sell",v()(e)).then(function(e){t.orders=e.data.good_data.data,t.orders.forEach(function(t){t.new_time=C(t.new_time)});var a=t.orders[0].trade_id;t.showForm(a)})},methods:{showForm:function(t){this.$router.push({name:"orderFormLink",params:{trade_id:t}})},active:function(){this.trade_id=this.$route.params.trade_id}},computed:{filterOrders:function(){var t=this;return this.orders.filter(function(e){return e.trade_id.toString().match(t.$store.getters.searchTxt)||e.client_shop.match(t.$store.getters.searchTxt)})}},watch:{$route:"active"}},J={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"order"}},[a("table",{staticClass:"table"},[t._m(0),t._v(" "),t._l(t.filterOrders,function(e){return a("tr",{staticClass:"light",class:e.trade_id==t.trade_id?"active":"",on:{click:function(a){return t.showForm(e.trade_id)}}},[a("td",[t._v(t._s(e.new_time))]),t._v(" "),a("td",[t._v(t._s(e.trade_id))]),t._v(" "),a("td",[t._v(t._s(e.client_shop))]),t._v(" "),a("td",[t._v(t._s(e.consume))])])})],2),t._v(" "),a("router-view")],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("tr",[e("th",[this._v("日期时间")]),this._v(" "),e("th",[this._v("订单编号")]),this._v(" "),e("th",[this._v("客户")]),this._v(" "),e("th",[this._v("价格")])])}]};var q=a("VU/8")(Y,J,!1,function(t){a("3ESU")},"data-v-7649c7b2",null).exports,W={name:"OrderForm",components:{},data:function(){return{good_data:{}}},methods:{getData:function(){var t=this,e={trade_id:this.$route.params.trade_id,token:this.$store.getters.token};this.$axios.post("Pcinfo/get_detail_sell",v()(e)).then(function(e){t.good_data=e.data.good_data,t.good_data.new_time=C(t.good_data.new_time)})}},created:function(){this.getData()},watch:{$route:"getData"}},G={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"orderform"}},[a("table",{staticClass:"table"},[a("tr",[a("th",{attrs:{colspan:"4"}},[t._v(t._s(t.good_data.good_name)+"("+t._s(t.good_data.type)+")")]),t._v(" "),a("th",[t._v("日期时间")])]),t._v(" "),a("tr",[a("td",[t._v("位置")]),t._v(" "),a("td",[t._v("球镜")]),t._v(" "),a("td",[t._v("散光")]),t._v(" "),a("td",[t._v("轴位")]),t._v(" "),a("td",[t._v(t._s(t.good_data.new_time))])]),t._v(" "),a("tr",[a("td",[t._v("R:")]),t._v(" "),a("td",[t._v(t._s(t.good_data.sph_r))]),t._v(" "),a("td",[t._v(t._s(t.good_data.a_r))]),t._v(" "),a("td",[t._v(t._s(t.good_data.r_axial))]),t._v(" "),a("td",{staticClass:"t_d",attrs:{rowspan:"4"}},[t._v("备注:"),a("span",[t._v(t._s(t.good_data.remark))])])]),t._v(" "),a("tr",[a("td",[t._v("L:")]),t._v(" "),a("td",[t._v(t._s(t.good_data.sph_l))]),t._v(" "),a("td",[t._v(t._s(t.good_data.a_l))]),t._v(" "),a("td",[t._v(t._s(t.good_data.l_axial))])]),t._v(" "),a("tr",[a("td",{attrs:{colspan:"2"}},[t._v("瞳距:"+t._s(t.good_data.eye_distance))]),t._v(" "),a("td",{attrs:{rowspan:"2",colspan:"2"}})]),t._v(" "),a("tr",[a("td",{attrs:{colspan:"2"}},[t._v("瞳高:"+t._s(t.good_data.eye_high))])]),t._v(" "),a("tr",[a("td",{attrs:{colspan:"2"}},[t._v("ADD:"+t._s(t.good_data.eye_add))]),t._v(" "),a("td",{attrs:{colspan:"3"}},[t._v("数量:"+t._s(t.good_data.num))])]),t._v(" "),a("tr",[a("td",{attrs:{colspan:"5"}},[t._v("客户名称:"+t._s(t.good_data.client_shop))])])])])},staticRenderFns:[]};var K=a("VU/8")(W,G,!1,function(t){a("VxIM")},"data-v-42a6ba4c",null).exports,Q={name:"CommodityForm",components:{},data:function(){return{good_data:{},sph:[],astigmatism:[]}},methods:{getData:function(){var t=this;this.sph=[],this.astigmatism=[];var e={commodity_id:this.$route.params.commodity_id,token:this.$store.getters.token};Array.prototype.unique=function(){for(var t={},e=[],a=0;a<this.length;a++)t[this[a]]||(t[this[a]]="mark",e.push(this[a]));return e},this.$axios.post("Pcinfo/get_good",v()(e)).then(function(e){var a=e.data.good_data.data;a.forEach(function(e){t.sph.push(e.sph),t.astigmatism.push(e.astigmatism)}),t.sph=t.sph.unique().sort(),t.astigmatism=t.astigmatism.unique().sort(),t.$nextTick(function(){var t=this;a.forEach(function(e){var a=t.sph.indexOf(e.sph)+2,r=t.astigmatism.indexOf(e.astigmatism)+2,i=e.good_inventory;document.getElementById("table").rows[a].cells[r].innerHTML=i})})})}},created:function(){this.getData()},watch:{$route:"getData"}},tt={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"commodityForm"}},[a("table",{staticClass:"table",attrs:{id:"table"}},[a("tr",{staticClass:"blod"},[a("td",[t._v("光度")]),t._v(" "),a("td",[t._v("散光")]),t._v(" "),t._l(t.astigmatism,function(e){return a("td",[t._v(t._s(e))])})],2),t._v(" "),a("tr",[a("td",{staticClass:"blod"},[t._v("球镜")]),t._v(" "),t._l(t.astigmatism.length+1,function(t){return a("td")})],2),t._v(" "),t._l(t.sph,function(e){return a("tr",[a("td",{staticClass:"blod"},[t._v(t._s(e))]),t._v(" "),t._l(t.astigmatism.length+1,function(t){return a("td")})],2)})],2)])},staticRenderFns:[]};var et=a("VU/8")(Q,tt,!1,function(t){a("XVae")},"data-v-3e4f3abc",null).exports,at={name:"Month",data:function(){return{financeList:[],total:{}}},methods:{getData:function(){var t=this,e=this.$route.params.year_id,a=this.$route.params.month_id,r=e+"-"+a+"-01 00:00:00",i=e+"-"+(a+1)+"-01 00:00:00",s={token:this.$store.getters.token,worker_id:this.$store.getters.worker_id,start_date:new Date(r).getTime()/1e3,end_date:new Date(i).getTime()/1e3};this.$axios.post("Pcinfo/get_finance",v()(s)).then(function(e){t.financeList=e.data.finance_data.data,t.total=e.data.total;var a=[0];t.financeList.forEach(function(t,e){t.new_time=function(t){if(0!=t){var e=new Date(1e3*t);return e.getFullYear()+"/"+(e.getMonth()+1)+"/"+e.getDate()}return"暂无"}(t.new_time),t.debt=a[e]+t.consume-t.receipt-t.other_consume,a.push(t.debt)}),t.total.total_debt=a[a.length-1]})}},created:function(){this.getData()},watch:{$route:"getData"}},rt={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"month"}},[a("table",{staticClass:"table"},[t._m(0),t._v(" "),t._l(t.financeList,function(e){return a("tr",[a("td",[t._v(t._s(e.new_time))]),t._v(" "),a("td",[t._v(t._s(e.trade_id))]),t._v(" "),a("td",[t._v(t._s(e.consume))]),t._v(" "),a("td",[t._v(t._s(e.receipt))]),t._v(" "),a("td",[t._v(t._s(e.other_consume))]),t._v(" "),a("td",[t._v(t._s(e.debt))])])}),t._v(" "),a("tr",[a("td",[t._v("总和")]),t._v(" "),a("td"),t._v(" "),a("td",[t._v(t._s(t.total.total_consume))]),t._v(" "),a("td",[t._v(t._s(t.total.total_receipt))]),t._v(" "),a("td",[t._v(t._s(t.total.total_other_consume))]),t._v(" "),a("td",[t._v(t._s(t.total.total_debt))])])],2)])},staticRenderFns:[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("tr",[a("th",[t._v("明细")]),t._v(" "),a("th",[t._v("订单编号")]),t._v(" "),a("th",[t._v("本月销量")]),t._v(" "),a("th",[t._v("已收款")]),t._v(" "),a("th",[t._v("其他费用")]),t._v(" "),a("th",[t._v("总欠款")])])}]};var it=a("VU/8")(at,rt,!1,function(t){a("8Hml")},"data-v-e63859ee",null).exports,st={name:"Year",data:function(){return{financeList:[],total:{}}},methods:{getData:function(){var t=this,e=this.$route.params.year_id,a=e+"-01-01 00:00:00",r=e+1+"-01-01 00:00:00",i={token:this.$store.getters.token,worker_id:this.$store.getters.worker_id,start_date:new Date(a).getTime()/1e3,end_date:new Date(r).getTime()/1e3};this.$axios.post("Pcinfo/get_finance",v()(i)).then(function(e){t.financeList=e.data.finance_data.data,t.total=e.data.total;var a=[0];t.financeList.forEach(function(t,e){t.new_time=function(t){if(0!=t){var e=new Date(1e3*t);return e.getFullYear()+"/"+(e.getMonth()+1)}return"暂无"}(t.new_time),t.debt=a[e]+t.consume-t.receipt-t.other_consume,a.push(t.debt)}),t.total.total_debt=a[a.length-1]})}},created:function(){this.getData()},watch:{$route:"getData"}},nt={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"year"}},[a("table",{staticClass:"table"},[t._m(0),t._v(" "),t._l(t.financeList,function(e){return a("tr",[a("td",[t._v(t._s(e.new_time))]),t._v(" "),a("td",[t._v(t._s(e.consume))]),t._v(" "),a("td",[t._v(t._s(e.receipt))]),t._v(" "),a("td",[t._v(t._s(e.other_consume))]),t._v(" "),a("td",[t._v(t._s(e.debt))])])}),t._v(" "),a("tr",[a("td",[t._v("总和")]),t._v(" "),a("td",[t._v(t._s(t.total.total_consume))]),t._v(" "),a("td",[t._v(t._s(t.total.total_receipt))]),t._v(" "),a("td",[t._v(t._s(t.total.total_other_consume))]),t._v(" "),a("td",[t._v(t._s(t.total.total_debt))])])],2)])},staticRenderFns:[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("tr",[a("th",[t._v("明细")]),t._v(" "),a("th",[t._v("月销售额")]),t._v(" "),a("th",[t._v("月收款")]),t._v(" "),a("th",[t._v("其他费用")]),t._v(" "),a("th",[t._v("月总欠款")])])}]};var ot=a("VU/8")(st,nt,!1,function(t){a("md6z")},"data-v-003b034a",null).exports,dt={inject:["reload","mask"],name:"edit",data:function(){return{src:"",editData:{},isEdit:!1}},methods:{update:function(){var t=this,e=document.getElementById("file").files[0],a=this.$store.getters.token,r=this.editData.user_name,i=this.editData.user_phone,s=this.editData.user_id_card_num,n=this.editData.user_login_pw,o=this.editData.user_login_pw,d=this.editData.user_login_pw,_=this.editData.user_login_pw,u=this.editData.user_manager_pw,l=this.editData.user_id,m=new Date(this.editData.expire_time).getTime()/1e3,c=new FormData;if(e){if(-1==e.type.indexOf("image/"))return void alert("请上传图片");c.append("file",e)}var v=/^\w{3,8}$/;if(i&&""!==i&&/^\d{11}$/.test(i))if(s&&""!==s&&/^[1-9]\d{7}((0\d)|(1[0-2]))(([0|1|2]\d)|3[0-1])\d{3}$|^[1-9]\d{5}[1-9]\d{3}((0\d)|(1[0-2]))(([0|1|2]\d)|3[0-1])\d{3}([0-9]|X)$/.test(s))if(n&&""!==n&&/^(?![0-9]+$)(?![a-zA-Z]+$)[0-9A-Za-z]{6,32}$/.test(n))if(o&&""!==o&&v.test(o))if(d&&""!==d&&v.test(d))if(_&&""!==_&&v.test(_))if(u&&""!==u&&v.test(u))if(r&&""!==r&&/^[\u4E00-\u9FA5A-Za-z]+$/.test(r))if(m&&""!==m){c.append("token",a),c.append("user_name",r),c.append("user_phone",i),c.append("user_id_card_num",s),c.append("user_login_pw",n),c.append("user_master_pw",o),c.append("user_finance_pw",d),c.append("user_saving_pw",_),c.append("user_manager_pw",u),c.append("user_id",l),c.append("expire_time",m);this.$axios.post("Manager/update_worker_info",c,{headers:{"Content-Type":"multipart/form-data"}}).then(function(e){1==e.data.status?(document.getElementById("edit").style.display="none",alert("修改成功"),t.reload(),t.mask()):1e4==e.data.errorCode?alert("修改值非法"):"user phone exist"==e.data.msg?alert("账号已存在"):alert("服务器错误")})}else alert("请输入正确的日期");else alert("姓名只能输入中文和英文");else alert("库存密码为英文或数字，3~8位");else alert("库存密码为英文或数字，3~8位");else alert("财务密码为英文或数字，3~8位");else alert("店长密码为英文或数字，3~8位");else alert("登录密码必须为英文和数字，最低6位");else alert("请输入正确的身份证号码");else alert("请输入正确的手机号码")},getEditData:function(t){this.isEdit=!1,this.editData.user_id=t.user_id,this.editData.user_name=t.user_name,this.editData.user_phone=t.user_phone,this.editData.user_id_card_num=t.user_id_card_num,this.editData.user_login_pw=t.user_login_pw,this.editData.user_master_pw=t.user_master_pw,this.editData.user_finance_pw=t.user_finance_pw,this.editData.user_saving_pw=t.user_saving_pw,this.editData.user_manager_pw=t.user_manager_pw,this.src=t.user_id_card_photo,this.editData.expire_time=t.expire_time},getFile:function(t){var e=this,a=t.target.files[0];if(t&&window.FileReader){var r=new FileReader;r.readAsDataURL(a),r.onloadend=function(){e.src=this.result}}},close:function(){this.isEdit=!1,this.mask(),document.getElementById("edit").style.display="none"}}},_t={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"edit"}},[a("div",{staticClass:"header"},[a("div",{staticClass:"close",on:{click:t.close}},[t._v("X")]),t._v(" "),a("h3",[t._v("修改加工房")])]),t._v(" "),a("form",{on:{submit:function(e){return e.preventDefault(),t.update(e)}}},[a("div",{staticClass:"form"},[a("div",{staticClass:"form-group"},[a("label",[t._v("姓名：")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.editData.user_name,expression:"editData.user_name",modifiers:{trim:!0}}],attrs:{type:"text",placeholder:"中文或英文"},domProps:{value:t.editData.user_name},on:{input:function(e){e.target.composing||t.$set(t.editData,"user_name",e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}})]),t._v(" "),a("div",{staticClass:"form-group"},[a("label",[t._v("账号/手机号：")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.editData.user_phone,expression:"editData.user_phone",modifiers:{trim:!0}}],attrs:{type:"text",placeholder:"手机号"},domProps:{value:t.editData.user_phone},on:{input:function(e){e.target.composing||t.$set(t.editData,"user_phone",e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}})]),t._v(" "),a("div",{staticClass:"form-group"},[a("label",[t._v("身份证号码：")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.editData.user_id_card_num,expression:"editData.user_id_card_num",modifiers:{trim:!0}}],attrs:{type:"text",placeholder:"身份证号码"},domProps:{value:t.editData.user_id_card_num},on:{input:function(e){e.target.composing||t.$set(t.editData,"user_id_card_num",e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}})]),t._v(" "),a("div",{staticClass:"form-group"},[a("label",[t._v("登录密码：")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.editData.user_login_pw,expression:"editData.user_login_pw",modifiers:{trim:!0}}],attrs:{type:"text",placeholder:"数字加英文，最低6位"},domProps:{value:t.editData.user_login_pw},on:{input:function(e){e.target.composing||t.$set(t.editData,"user_login_pw",e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}})]),t._v(" "),a("div",{staticClass:"form-group"},[a("label",[t._v("店长密码：")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.editData.user_master_pw,expression:"editData.user_master_pw",modifiers:{trim:!0}}],attrs:{type:"text",placeholder:"英文或数字，3~8位"},domProps:{value:t.editData.user_master_pw},on:{input:function(e){e.target.composing||t.$set(t.editData,"user_master_pw",e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}})]),t._v(" "),a("div",{staticClass:"form-group"},[a("label",[t._v("财务密码：")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.editData.user_finance_pw,expression:"editData.user_finance_pw",modifiers:{trim:!0}}],attrs:{type:"text",placeholder:"英文或数字，3~8位"},domProps:{value:t.editData.user_finance_pw},on:{input:function(e){e.target.composing||t.$set(t.editData,"user_finance_pw",e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}})]),t._v(" "),a("div",{staticClass:"form-group"},[a("label",[t._v("库存密码：")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.editData.user_saving_pw,expression:"editData.user_saving_pw",modifiers:{trim:!0}}],attrs:{type:"text",placeholder:"英文或数字，3~8位"},domProps:{value:t.editData.user_saving_pw},on:{input:function(e){e.target.composing||t.$set(t.editData,"user_saving_pw",e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}})]),t._v(" "),a("div",{staticClass:"form-group"},[a("label",[t._v("经理密码：")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.editData.user_manager_pw,expression:"editData.user_manager_pw",modifiers:{trim:!0}}],attrs:{type:"text",placeholder:"英文或数字，3~8位"},domProps:{value:t.editData.user_manager_pw},on:{input:function(e){e.target.composing||t.$set(t.editData,"user_manager_pw",e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}})]),t._v(" "),a("div",{staticClass:"form-group"},[a("label",[t._v("到期时间：")]),t._v(" "),t.isEdit?a("input",{directives:[{name:"model",rawName:"v-model",value:t.editData.expire_time,expression:"editData.expire_time"}],attrs:{type:"date"},domProps:{value:t.editData.expire_time},on:{input:function(e){e.target.composing||t.$set(t.editData,"expire_time",e.target.value)}}}):a("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.editData.expire_time,expression:"editData.expire_time",modifiers:{trim:!0}}],attrs:{type:"text"},domProps:{value:t.editData.expire_time},on:{click:function(e){t.isEdit=!0},input:function(e){e.target.composing||t.$set(t.editData,"expire_time",e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}})]),t._v(" "),a("div",{staticClass:"form-img"},[a("label",{attrs:{for:"file"}},[t._v("更改图片")]),t._v(" "),a("div",{attrs:{id:"img-container"}},[a("img",{attrs:{src:t.src,alt:""}})]),t._v(" "),a("input",{attrs:{type:"file",id:"file"},on:{change:t.getFile}})]),t._v(" "),t._m(0),t._v(" "),a("button",{staticClass:"btn",attrs:{type:"submit"}},[t._v("确认修改")])])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"identity"},[e("span",[this._v("账号身份：加工房")])])}]};var ut={inject:["reload","mask"],name:"add",data:function(){return{src:"",addData:{}}},methods:{update:function(){var t=this,e=document.getElementById("add-file").files[0],a=this.$store.getters.token,r=this.addData.user_name,i=this.addData.user_phone,s=this.addData.user_id_card_num,n=this.addData.user_login_pw,o=this.addData.user_master_pw,d=this.addData.user_finance_pw,_=this.addData.user_saving_pw,u=this.addData.user_manager_pw,l=new Date(this.addData.expire_time).getTime()/1e3,m=new FormData;if(e){if(-1==e.type.indexOf("image/"))return void alert("请上传图片");m.append("file",e)}var c=/^\w{3,8}$/;if(i&&""!==i&&/^\d{11}$/.test(i))if(s&&""!==s&&/^[1-9]\d{7}((0\d)|(1[0-2]))(([0|1|2]\d)|3[0-1])\d{3}$|^[1-9]\d{5}[1-9]\d{3}((0\d)|(1[0-2]))(([0|1|2]\d)|3[0-1])\d{3}([0-9]|X)$/.test(s))if(n&&""!==n&&/^(?![0-9]+$)(?![a-zA-Z]+$)[0-9A-Za-z]{6,32}$/.test(n))if(o&&""!==o&&c.test(o))if(d&&""!==d&&c.test(d))if(_&&""!==_&&c.test(_))if(u&&""!==u&&c.test(u))if(r&&""!==r&&/^[\u4E00-\u9FA5A-Za-z]+$/.test(r))if(l&&""!==l)if(e){m.append("user_id_card_photo",e),m.append("token",a),m.append("user_name",r),m.append("user_phone",i),m.append("user_id_card_num",s),m.append("user_login_pw",n),m.append("user_master_pw",o),m.append("user_finance_pw",d),m.append("user_saving_pw",_),m.append("user_manager_pw",u),m.append("expire_time",l);this.$axios.post("Manager/new_worker",m,{headers:{"Content-Type":"multipart/form-data"}}).then(function(e){1==e.data.status?(document.getElementById("add").style.display="none",alert("添加成功"),t.reload(),t.mask()):"params error"==e.data.msg?alert("添加值为空或非法"):"photo err"==e.data.msg?alert("图片错误"):"user phone exist"==e.data.msg?alert("账号已存在"):alert("服务器错误")})}else alert("请上传图片");else alert("请输入正确的日期");else alert("姓名只能输入中文和英文");else alert("库存密码为英文或数字，3~8位");else alert("库存密码为英文或数字，3~8位");else alert("财务密码为英文或数字，3~8位");else alert("店长密码为英文或数字，3~8位");else alert("登录密码必须为英文和数字，最低6位");else alert("请输入正确的身份证号码");else alert("请输入正确的手机号码")},getFile:function(t){var e=this,a=t.target.files[0];if(t&&window.FileReader){var r=new FileReader;r.readAsDataURL(a),r.onloadend=function(){e.src=this.result}}},close:function(){this.mask(),this.addData={},document.getElementById("add-file").value=null,this.src="",document.getElementById("add").style.display="none"}}},lt={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"add"}},[a("div",{staticClass:"header"},[a("div",{staticClass:"close",on:{click:t.close}},[t._v("X")]),t._v(" "),a("h3",[t._v("添加加工房")])]),t._v(" "),a("form",{on:{submit:function(e){return e.preventDefault(),t.update(e)}}},[a("div",{staticClass:"form"},[a("div",{staticClass:"form-group"},[a("label",[t._v("姓名：")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.addData.user_name,expression:"addData.user_name",modifiers:{trim:!0}}],attrs:{type:"text",placeholder:"中文或英文"},domProps:{value:t.addData.user_name},on:{input:function(e){e.target.composing||t.$set(t.addData,"user_name",e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}})]),t._v(" "),a("div",{staticClass:"form-group"},[a("label",[t._v("账号/手机号：")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.addData.user_phone,expression:"addData.user_phone",modifiers:{trim:!0}}],attrs:{type:"text",placeholder:"手机号"},domProps:{value:t.addData.user_phone},on:{input:function(e){e.target.composing||t.$set(t.addData,"user_phone",e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}})]),t._v(" "),a("div",{staticClass:"form-group"},[a("label",[t._v("身份证号码：")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.addData.user_id_card_num,expression:"addData.user_id_card_num",modifiers:{trim:!0}}],attrs:{type:"text",placeholder:"身份证号码"},domProps:{value:t.addData.user_id_card_num},on:{input:function(e){e.target.composing||t.$set(t.addData,"user_id_card_num",e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}})]),t._v(" "),a("div",{staticClass:"form-group"},[a("label",[t._v("登录密码：")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.addData.user_login_pw,expression:"addData.user_login_pw",modifiers:{trim:!0}}],attrs:{type:"text",placeholder:"数字加英文，最低6位"},domProps:{value:t.addData.user_login_pw},on:{input:function(e){e.target.composing||t.$set(t.addData,"user_login_pw",e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}})]),t._v(" "),a("div",{staticClass:"form-group"},[a("label",[t._v("店长密码：")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.addData.user_master_pw,expression:"addData.user_master_pw",modifiers:{trim:!0}}],attrs:{type:"text",placeholder:"英文或数字，3~8位"},domProps:{value:t.addData.user_master_pw},on:{input:function(e){e.target.composing||t.$set(t.addData,"user_master_pw",e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}})]),t._v(" "),a("div",{staticClass:"form-group"},[a("label",[t._v("财务密码：")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.addData.user_finance_pw,expression:"addData.user_finance_pw",modifiers:{trim:!0}}],attrs:{type:"text",placeholder:"英文或数字，3~8位"},domProps:{value:t.addData.user_finance_pw},on:{input:function(e){e.target.composing||t.$set(t.addData,"user_finance_pw",e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}})]),t._v(" "),a("div",{staticClass:"form-group"},[a("label",[t._v("库存密码：")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.addData.user_saving_pw,expression:"addData.user_saving_pw",modifiers:{trim:!0}}],attrs:{type:"text",placeholder:"英文或数字，3~8位"},domProps:{value:t.addData.user_saving_pw},on:{input:function(e){e.target.composing||t.$set(t.addData,"user_saving_pw",e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}})]),t._v(" "),a("div",{staticClass:"form-group"},[a("label",[t._v("经理密码：")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.addData.user_manager_pw,expression:"addData.user_manager_pw",modifiers:{trim:!0}}],attrs:{type:"text",placeholder:"英文或数字，3~8位"},domProps:{value:t.addData.user_manager_pw},on:{input:function(e){e.target.composing||t.$set(t.addData,"user_manager_pw",e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}})]),t._v(" "),a("div",{staticClass:"form-group"},[a("label",[t._v("到期时间：")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.addData.expire_time,expression:"addData.expire_time"}],attrs:{type:"date"},domProps:{value:t.addData.expire_time},on:{input:function(e){e.target.composing||t.$set(t.addData,"expire_time",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"form-img"},[a("label",{attrs:{for:"add-file"}},[t._v("上传图片")]),t._v(" "),a("div",{attrs:{id:"add-img-container"}},[a("img",{attrs:{src:t.src,alt:""}})]),t._v(" "),a("input",{attrs:{type:"file",id:"add-file",name:"photo"},on:{change:t.getFile}})]),t._v(" "),t._m(0),t._v(" "),a("button",{staticClass:"btn",attrs:{type:"submit"}},[t._v("确认添加")])])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"identity"},[e("span",[this._v("账号身份：加工房")])])}]};var mt={inject:["mask"],name:"manager",components:{edit:a("VU/8")(dt,_t,!1,function(t){a("Xfyq")},null,null).exports,add:a("VU/8")(ut,lt,!1,function(t){a("Vyji")},null,null).exports},data:function(){return{workerList:[],searchTxt:""}},beforeRouteEnter:function(t,e,a){window.sessionStorage.getItem("isLogin")&&window.sessionStorage.getItem("isManager")?a():(alert("你需要登陆"),a("/"))},created:function(){var t=this,e={token:this.$store.getters.token};this.$axios.post("Manager/get_workers_list",v()(e)).then(function(e){t.workerList=JSON.parse(e.data),t.workerList.forEach(function(t){t.expire_time=b(t.expire_time),t.auditor_time=b(t.auditor_time)})})},methods:{edit:function(t){this.mask(),document.getElementById("edit").style.display="block",this.$refs.edit.getEditData(t)},add:function(){this.mask(),document.getElementById("add").style.display="block"}},computed:{filterworkers:function(){var t=this;return this.workerList.filter(function(e){return e.user_name.match(t.$store.getters.searchTxt)||e.user_phone.match(t.$store.getters.searchTxt)})}}},ct={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"manager"}},[a("table",{staticClass:"table"},[t._m(0),t._v(" "),t._l(t.filterworkers,function(e){return[a("tr",[a("td",{attrs:{rowspan:"2"}},[a("img",{attrs:{src:e.user_id_card_photo,alt:""}})]),t._v(" "),a("td",{attrs:{rowspan:"2"}},[t._v(t._s(e.user_name))]),t._v(" "),a("td",{attrs:{rowspan:"2"}},[t._v(t._s(e.user_phone))]),t._v(" "),a("td",{attrs:{rowspan:"2"}},[t._v(t._s(e.user_id_card_num))]),t._v(" "),a("td",[t._v("登录")]),t._v(" "),a("td",[t._v("店长")]),t._v(" "),a("td",[t._v("财务")]),t._v(" "),a("td",[t._v("库存")]),t._v(" "),a("td",[t._v("经理")]),t._v(" "),a("td",{attrs:{rowspan:"2"}},[t._v(t._s(e.auditor_time))]),t._v(" "),a("td",{attrs:{rowspan:"2"}},[t._v(t._s(e.expire_time))]),t._v(" "),a("td",{attrs:{rowspan:"2"}},[a("span",{staticClass:"edit",on:{click:function(a){return t.edit(e)}}},[t._v("修改")])])]),t._v(" "),a("tr",[a("td",[t._v(t._s(e.user_login_pw))]),t._v(" "),a("td",[t._v(t._s(e.user_master_pw))]),t._v(" "),a("td",[t._v(t._s(e.user_finance_pw))]),t._v(" "),a("td",[t._v(t._s(e.user_saving_pw))]),t._v(" "),a("td",[t._v(t._s(e.user_manager_pw))])])]})],2),t._v(" "),a("edit",{ref:"edit",staticClass:"edit-wrapper"}),t._v(" "),a("div",{staticClass:"add",on:{click:t.add}},[a("span",{staticClass:"addBtn"},[t._v("+")]),t._v(" "),a("span",[t._v("添加用户")])]),t._v(" "),a("add",{staticClass:"edit-wrapper"})],1)},staticRenderFns:[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("tr",[a("th",[t._v("身份证图片")]),t._v(" "),a("th",[t._v("姓名")]),t._v(" "),a("th",[t._v("账号/手机号")]),t._v(" "),a("th",[t._v("身份证")]),t._v(" "),a("th",{attrs:{colspan:"5"}},[t._v("密码")]),t._v(" "),a("th",[t._v("审核时间")]),t._v(" "),a("th",[t._v("到期时间")]),t._v(" "),a("th",[t._v("操作")])])}]};var vt=[{path:"/",name:"loginLink",component:h},{path:"/home",name:"homeLink",component:m,redirect:"/home/admin",children:[{path:"/home/admin",name:"adminLink",component:k},{path:"/home/factory",name:"factoryLink",component:P},{path:"/home/manager",name:"managerLink",component:a("VU/8")(mt,ct,!1,function(t){a("xlfa")},"data-v-02863aba",null).exports},{path:"/home/singleFactory",name:"singleFactoryLink",component:S,redirect:"/home/singleFactory/client",children:[{path:"/home/singleFactory/client",name:"clientLink",component:M},{path:"/home/singleFactory/commodity",name:"commodityLink",component:O,children:[{path:"/home/singleFactory/commodity/commodityForm/:commodity_id",name:"commodityFormLink",component:et}]},{path:"/home/singleFactory/finance",name:"financeLink",component:H,children:[{path:"/home/singleFactory/finance/year:year_id",name:"yearLink",component:ot},{path:"/home/singleFactory/finance/year:year_id/month:month_id",name:"monthLink",component:it}]},{path:"/home/singleFactory/order",name:"orderLink",component:q,children:[{path:"/home/singleFactory/order/orderForm/:trade_id",name:"orderFormLink",component:K}]}]}]}],pt=a("mtWM"),ft=a.n(pt),ht=a("NYxO");s.a.use(ht.a);var gt=new ht.a.Store({state:{isLogin:!1,isAdmin:!1,isManager:!1,token:"",searchTxt:"",editData:{},worker_id:""},getters:{isLogin:function(t){return t.isLogin=sessionStorage.getItem("isLogin"),t.isLogin},isAdmin:function(t){return t.isAdmin=sessionStorage.getItem("isAdmin"),t.isAdmin},token:function(t){return t.token=sessionStorage.getItem("token"),t.token},worker_id:function(t){return t.worker_id=sessionStorage.getItem("worker_id"),t.worker_id},searchTxt:function(t){return t.searchTxt}},mutations:{setSearchTxt:function(t,e){t.searchTxt=e},userStatus:function(t,e){e.identity?("admin"==e.identity?(sessionStorage.setItem("isAdmin",!0),t.isAdmin=!0):"manager"==e.identity&&(sessionStorage.setItem("isManager",!0),t.isManager=!0),sessionStorage.setItem("isLogin",!0),sessionStorage.setItem("token",e.token),t.isLogin=!0):(sessionStorage.removeItem("isLogin"),sessionStorage.removeItem("isManager"),sessionStorage.removeItem("isAdmin"),sessionStorage.removeItem("worker_id"),sessionStorage.removeItem("token"),t.isLogin=!1,t.isAdmin=!1,t.isManager=!1,t.token="")},setWorker_id:function(t,e){t.worker_id=e,sessionStorage.setItem("worker_id",e)}},actions:{setUser:function(t,e){(0,t.commit)("userStatus",e)}}});s.a.config.productionTip=!1,s.a.use(d.a),s.a.prototype.$axios=ft.a,ft.a.defaults.headers.post["Content-Type"]="application/json;charset=UTF-8",ft.a.defaults.headers["Content-Type"]="application/json;charset=UTF-8",ft.a.defaults.baseURL="http://m.dingpeitong.cn/pei/public/index.php/api/",ft.a.interceptors.response.use(function(t){return t},function(t){return alert("账号在其他地方登录或网络请求失败，请重新登录"),gt.commit("userStatus",""),wt.push({name:"loginLink"}),i.a.reject(t)});var wt=new d.a({routes:vt,mode:"history",base:"/dingPT/"});new s.a({el:"#app",router:wt,store:gt,render:function(t){return t(o)}})},Orav:function(t,e){},TAcF:function(t,e){},VxIM:function(t,e){},Vyji:function(t,e){},XVae:function(t,e){},Xfyq:function(t,e){},ZgDZ:function(t,e){},d8FA:function(t,e){},eYZy:function(t,e){},md6z:function(t,e){},xlfa:function(t,e){}},["NHnr"]);